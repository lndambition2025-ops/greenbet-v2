<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GreenBet Pro Intelligence</title>
    <style>
        :root { --primary: #27ae60; --dark: #2c3e50; --bg: #f4f7f6; --white: #ffffff; }
        body { background: var(--bg); color: var(--dark); font-family: -apple-system, system-ui, sans-serif; margin: 0; padding-bottom: 30px; }
        
        header { background: var(--white); padding: 15px; text-align: center; border-bottom: 3px solid var(--primary); sticky; top: 0; z-index: 100; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .logo { font-size: 1.5rem; font-weight: 900; color: var(--primary); letter-spacing: -1px; }

        /* Navigation des March√©s */
        .market-nav { display: flex; gap: 8px; overflow-x: auto; padding: 12px; background: var(--white); border-bottom: 1px solid #eee; position: sticky; top: 60px; z-index: 99; }
        .market-btn { background: #eee; border: none; padding: 8px 15px; border-radius: 20px; font-size: 0.75rem; font-weight: bold; white-space: nowrap; cursor: pointer; color: #777; transition: 0.3s; }
        .market-btn.active { background: var(--primary); color: white; box-shadow: 0 4px 10px rgba(39, 174, 96, 0.3); }

        .container { padding: 12px; max-width: 600px; margin: auto; }

        /* Championnats */
        .league-row { background: var(--dark); color: white; padding: 8px 12px; border-radius: 6px; margin: 20px 0 10px 0; font-size: 0.8rem; font-weight: 800; display: flex; justify-content: space-between; }
        
        /* Cartes de Match */
        .match-card { background: var(--white); border-radius: 12px; padding: 15px; margin-bottom: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.04); border: 1px solid #efefef; }
        .teams { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .team-name { width: 40%; font-weight: 700; font-size: 0.95rem; }
        .vs { color: #ccc; font-size: 0.7rem; font-weight: bold; }
        
        /* Prediction Box */
        .pred-box { background: #f9fdfb; border: 1px solid #eafaf1; border-radius: 8px; padding: 12px; }
        .pred-header { display: flex; justify-content: space-between; font-size: 0.65rem; color: #999; font-weight: bold; margin-bottom: 5px; text-transform: uppercase; }
        .pred-value { display: flex; justify-content: space-between; align-items: center; }
        .tip { color: var(--primary); font-weight: 900; font-size: 1.1rem; }
        .conf-badge { background: #eafaf1; color: var(--primary); padding: 3px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; }
        
        /* Progress Bar */
        .progress-bg { background: #eee; height: 5px; border-radius: 3px; margin-top: 10px; overflow: hidden; }
        .progress-fill { background: var(--primary); height: 100%; border-radius: 3px; }

        .loading { text-align: center; padding: 50px; color: #999; font-weight: bold; }
    </style>
</head>
<body>

    <header>
        <div class="logo">GREENBET ELITE ‚öΩ</div>
        <div style="font-size: 0.7rem; color: #999; font-weight: bold;">ANALYSE LIVE - SAMEDI 28 FEV.</div>
    </header>

    <div class="market-nav">
        <button class="market-btn active" onclick="changeMarket('WIN', this)">üèÜ Victoire</button>
        <button class="market-btn" onclick="changeMarket('GOALS', this)">‚öΩ Buts +2.5</button>
        <button class="market-btn" onclick="changeMarket('BTTS', this)">üî• Les 2 marquent</button>
        <button class="market-btn" onclick="changeMarket('HOME_GOALS', this)">üè† Buts Domicile</button>
    </div>

    <div class="container" id="app">
        <div class="loading">Initialisation des algorithmes...</div>
    </div>

    <script>
        const API_KEY = '8997f37435f3484f885f00e57204481c';
        let currentMarket = 'WIN';
        let matchData = {};

        // Les 5 grands championnats
        const leagues = { 'FL1': 'Ligue 1 üá´üá∑', 'PL': 'Premier League üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø', 'PD': 'La Liga üá™üá∏', 'SA': 'Serie A üáÆüáπ', 'BL1': 'Bundesliga üá©üá™' };

        async function init() {
            const container = document.getElementById('app');
            for (const code in leagues) {
                try {
                    const res = await fetch(`https://api.football-data.org/v4/competitions/${code}/matches?status=SCHEDULED`, {
                        headers: { 'X-Auth-Token': API_KEY }
                    });
                    const data = await res.json();
                    if (data.matches && data.matches.length > 0) {
                        matchData[leagues[code]] = data.matches.slice(0, 8);
                    }
                } catch (e) { console.error("Erreur ligue " + code); }
                // D√©lai pour respecter l'API gratuite
                await new Promise(r => setTimeout(r, 600));
            }
            render();
        }

        function changeMarket(m, btn) {
            currentMarket = m;
            document.querySelectorAll('.market-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            render();
        }

        function getPrediction(m) {
            const id = m.id;
            const h = m.homeTeam.name;
            const a = m.awayTeam.name;

            if (currentMarket === 'WIN') {
                const tip = (id % 3 === 0) ? `Nul ou ${m.awayTeam.shortName || '2'}` : `Victoire ${m.homeTeam.shortName || '1'}`;
                return { tip: tip, conf: 65 + (id % 20) };
            } else if (currentMarket === 'GOALS') {
                const tip = (id % 2 === 0) ? "+ 2.5 Buts" : "- 3.5 Buts";
                return { tip: tip, conf: 60 + (id % 15) };
            } else if (currentMarket === 'BTTS') {
                const tip = (id % 5 > 2) ? "OUI" : "NON";
                return { tip: tip, conf: 55 + (id % 25) };
            } else {
                const goals = (id % 3) + 0.5;
                return { tip: `+ ${goals} buts ${m.homeTeam.shortName || 'Dom.'}`, conf: 50 + (id % 30) };
            }
        }

        function render() {
            const container = document.getElementById('app');
            container.innerHTML = '';

            if (Object.keys(matchData).length === 0) {
                container.innerHTML = '<div class="loading">Aucun match d√©tect√© aujourd\'hui.<br><small>L\'API gratuite est peut-√™tre satur√©e.</small></div>';
                return;
            }

            for (const leagueName in matchData) {
                let section = `<div class="league-row"><span>${leagueName.toUpperCase()}</span> <span>${matchData[leagueName].length} MATCHS</span></div>`;
                
                matchData[leagueName].forEach(m => {
                    const pred = getPrediction(m);
                    section += `
                        <div class="match-card">
                            <div class="teams">
                                <span class="team-name" style="text-align:left">${m.homeTeam.shortName || m.homeTeam.name}</span>
                                <span class="vs">VS</span>
                                <span class="team-name" style="text-align:right">${m.awayTeam.shortName || m.awayTeam.name}</span>
                            </div>
                            <div class="pred-box">
                                <div class="pred-header">
                                    <span>Conseil GreenBet</span>
                                    <span>Fiabilit√©</span>
                                </div>
                                <div class="pred-value">
                                    <span class="tip">${pred.tip}</span>
                                    <span class="conf-badge">${pred.conf}%</span>
                                </div>
                                <div class="progress-bg"><div class="progress-fill" style="width:${pred.conf}%"></div></div>
                            </div>
                        </div>`;
                });
                container.innerHTML += section;
            }
        }

        window.onload = init;
    </script>
</body>
</html>
