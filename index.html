<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenBet Pro</title>
    <style>
        :root { --primary: #27ae60; --bg: #f8f9fa; }
        body { background: var(--bg); font-family: sans-serif; margin: 0; padding: 15px; }
        header { background: var(--primary); color: white; padding: 15px; text-align: center; border-radius: 10px; margin-bottom: 20px; font-weight: bold; }
        .match-card { background: white; border-radius: 12px; padding: 15px; margin-bottom: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 5px solid var(--primary); }
        .league { font-size: 0.7rem; color: #888; text-transform: uppercase; font-weight: bold; }
        .teams { font-size: 1rem; font-weight: bold; margin: 8px 0; display: flex; justify-content: space-between; }
        .tip { background: #eafaf1; color: #27ae60; padding: 8px; border-radius: 6px; font-weight: bold; text-align: center; margin-top: 10px; font-size: 0.9rem; }
    </style>
</head>
<body>

    <header>GREENBET ELITE ⚽<br><small>Samedi 28 Février</small></header>

    <div id="content">
        <div style="text-align:center; padding:20px;">Connexion au flux direct...</div>
    </div>

    <script>
        const API_KEY = '8997f37435f3484f885f00e57204481c';
        
        async function load() {
            const container = document.getElementById('content');
            try {
                // On tente de récupérer les matchs de Ligue 1 (FL1)
                const res = await fetch('https://api.football-data.org/v4/competitions/FL1/matches', {
                    headers: { 'X-Auth-Token': API_KEY }
                });
                const data = await res.json();
                
                if (data.matches && data.matches.length > 0) {
                    render(data.matches);
                } else {
                    showBackup();
                }
            } catch (e) {
                showBackup();
            }
        }

        function render(matches) {
            const container = document.getElementById('content');
            container.innerHTML = '';
            // On affiche les 10 prochains matchs
            matches.filter(m => m.status !== 'FINISHED').slice(0, 10).forEach(m => {
                container.innerHTML += `
                    <div class="match-card">
                        <div class="league">LIGUE 1</div>
                        <div class="teams"><span>${m.homeTeam.name}</span> <span>vs</span> <span>${m.awayTeam.name}</span></div>
                        <div class="tip">PRONO : ${m.id % 2 === 0 ? 'Victoire 1' : 'Nul ou 2'}</div>
                    </div>`;
            });
        }

        function showBackup() {
            const container = document.getElementById('content');
            // Ces matchs s'affichent SI l'API bloque
            const backup = [
                { l: "Ligue 1", t1: "Lyon", t2: "Lille", p: "Victoire Lyon" },
                { l: "Premier League", t1: "Liverpool", t2: "Newcastle", p: "Liverpool" },
                { l: "La Liga", t1: "Real Madrid", t2: "Seville", p: "Real Madrid" },
                { l: "Ligue 1", t1: "PSG", t2: "Monaco", p: "Over 2.5 Buts" }
            ];
            container.innerHTML = '';
            backup.forEach(m => {
                container.innerHTML += `
                    <div class="match-card">
                        <div class="league">${m.l}</div>
                        <div class="teams"><span>${m.t1}</span> <span>vs</span> <span>${m.t2}</span></div>
                        <div class="tip">CONSEIL : ${m.p}</div>
                    </div>`;
            });
        }

        window.onload = load;
    </script>
</body>
</html>
